{"version":3,"file":"deltix-ngx-vizceral.umd.js","sources":["../../../projects/ngx-vizceral/src/lib/ngx-vizceral.service.ts","../../../projects/ngx-vizceral/src/lib/ngx-vizceral.directive.ts","../../../projects/ngx-vizceral/src/lib/ngx-vizceral.component.ts","../../../projects/ngx-vizceral/src/lib/ngx-vizceral.component.html","../../../projects/ngx-vizceral/src/lib/ngx-vizceral.module.ts","../../../projects/ngx-vizceral/src/public-api.ts","../../../projects/ngx-vizceral/src/deltix-ngx-vizceral.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NgxVizceralService {\n  \n  constructor() { }\n}\n","import VizceralGraph      from '@deltix/vizceral';\n// const isEqual = require('lodash.isequal');\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nimport {\n  Directive,\n  OnInit,\n  AfterViewInit,\n  OnDestroy,\n  DoCheck,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  NgZone,\n  ElementRef,\n  KeyValueDiffer,\n  SimpleChanges,\n}                       from '@angular/core';\nimport { VizceralSize } from './ngx-vizceral.models';\n\n@Directive({\n  selector: '[vizceral]',\n  exportAs: 'ngxVizceral',\n})\nexport class VizceralDirective implements OnInit, AfterViewInit, OnDestroy, DoCheck, OnChanges {\n  @Output() viewChanged = new EventEmitter<any>();\n  @Output() viewUpdated = new EventEmitter<any>();\n  @Output() objectHighlighted = new EventEmitter<any>();\n  @Output() nodeContextSizeChanged = new EventEmitter<any>();\n  @Output() matchesFound = new EventEmitter<any>();\n  @Output() nodeUpdated = new EventEmitter<any>();\n  @Output() objectHovered = new EventEmitter<any>();\n  \n  @Input() definitions: any = null;\n  @Input() traffic: any = null;\n  // ANDY// private objectsJSON: any = null;\n  @Input() view: any = null;\n  @Input() showLabels = true;\n  // private initialTraffic: any = null;\n  @Input() filters: any = null;\n  @Input() objectToHighlight: any = null;\n  @Input() match: any = null;\n  @Input() modes: any = null;\n  @Input() allowDraggingOfNodes = false;\n  @Input() styles: any = null;\n  @Input() targetFramerate: any = null;\n  @Input() initialSize: {\n    width: number,\n    height: number,\n  };\n  @Input() useCurrentInitialSize: boolean;\n  @Input('vizceral') config: any;\n  \n  private ro: any = null;\n  private instance: VizceralGraph = null;\n  private initialWidth: number = null;\n  private initialHeight: number = null;\n  private configDiff: KeyValueDiffer<string, any>;\n  /* @Input()\n   set traffic(data: any) {\n   this.setTraffic(data);\n   }*/\n  private defaultProps = {\n    connectionHighlighted: () => {},\n    definitions: {},\n    filters: [],\n    match: '',\n    nodeHighlighted: () => {},\n    nodeUpdated: () => {},\n    nodeContextSizeChanged: () => {},\n    matchesFound: () => {},\n    objectHighlighted: () => {},\n    objectHovered: () => {},\n    objectToHighlight: null,\n    showLabels: true,\n    allowDraggingOfNodes: false,\n    styles: {},\n    traffic: {},\n    viewChanged: () => {},\n    viewUpdated: () => {},\n    view: [],\n    targetFramerate: null,\n  };\n  \n  constructor(\n    private zone: NgZone,\n    private elementRef: ElementRef,\n    // private differs: KeyValueDiffers,\n  ) {\n  }\n  \n  @Input()\n  set size(size: VizceralSize) {\n    this.setSize(size.width, size.height);\n  }\n  \n  ngOnInit(): void {\n    this.zone.runOutsideAngular(() => {\n  \n      const elRef = this.elementRef.nativeElement;\n      let size = {};\n      if (this.initialSize) {\n        size = this.initialSize;\n      } else if (this.useCurrentInitialSize) {\n        size = {\n          width: elRef.offsetWidth,\n          height: elRef.offsetHeight,\n        };\n      }\n      this.instance = new VizceralGraph(elRef, this.targetFramerate, size);\n  \n      this.instance.on('viewChanged', (event) => {\n        this.zone.run(() => {\n          this.viewChanged.emit(event);\n        });\n      });\n      this.instance.on('objectHighlighted', (event) => {\n        this.zone.run(() => {\n          this.objectHighlighted.emit(event);\n        });\n      });\n      this.instance.on('objectHovered', (event) => {\n        this.zone.run(() => {\n          this.objectHovered.emit(event);\n        });\n      });\n      this.instance.on('nodeUpdated', (event) => {\n        this.zone.run(() => {\n          this.nodeUpdated.emit(event);\n        });\n      });\n      this.instance.on('nodeContextSizeChanged', (event) => {\n        this.zone.run(() => {\n          this.nodeContextSizeChanged.emit(event);\n        });\n      });\n      this.instance.on('matchesFound', (event) => {\n        this.zone.run(() => {\n          this.matchesFound.emit(event);\n        });\n      });\n      this.instance.on('viewUpdated', (event) => {\n        this.zone.run(() => {\n          this.viewUpdated.emit(event);\n        });\n      });\n      \n      \n      // Pass our defaults to Vizceral in the case that it has different defaults.\n      this.instance.setOptions({\n        allowDraggingOfNodes: this.allowDraggingOfNodes,\n        showLabels: this.showLabels,\n      });\n      \n      //   //return back for this\n      //  if (!isEqual(this.filters, this.defaultProps.filters)) {\n      //     this.instance.setFilters(this.filters);\n      //   }\n      \n      //   if (!isEqual(this.definitions, this.defaultProps.definitions)) {\n      //     this.instance.updateDefinitions(this.definitions);\n      //   }\n      \n      // Finish the current call stack before updating the view.\n      // If vizceral-react was passed data directly without any asynchronous\n      // calls to retrieve the data, the initially loaded graph would not\n      // animate properly.\n      setTimeout(() => {\n        \n        // let renderers = {\n        //   global: GlobalTrafficGraph,\n        //   region: RegionTrafficGraph,\n        //   focused: FocusedTrafficGraph,\n        //   focusedChild: FocusedChildTrafficGraph,\n        //   dns: DnsTrafficGraph\n        // };\n        // console.log (\"Renderers:\");\n        // console.log (renderers);\n        // //this.instance.setRenderers(renderers);\n        \n        this.instance.setView(this.view || this.defaultProps.view, this.objectToHighlight);\n        \n        this.instance.updateData(this.traffic);\n        const perfNow = this.getPerformanceNow();\n        this.instance.animate(perfNow === null ? 0 : perfNow);\n        this.instance.updateBoundingRectCache();\n        \n        // console.log('VizceralGraph:')\n        // console.log(this.instance)\n        \n      }, 0);\n    });\n    \n    this.zone.runOutsideAngular(() => {\n      this.ro = new ResizeObserver((entries, observer) => {\n        const element = this.elementRef.nativeElement.parentElement.parentElement;\n        \n        if (!this.initialWidth) {\n          this.setSize(element.offsetWidth, element.offsetHeight);\n        }\n      });\n      \n      this.ro.observe(this.elementRef.nativeElement.parentElement.parentElement);\n    });\n  }\n  \n  ngAfterViewInit(): void {\n    // ANDY\n    //       // Pass our defaults to Vizceral in the case that it has different defaults.\n    //       this.instance.setOptions({\n    //         allowDraggingOfNodes: this.allowDraggingOfNodes,\n    //         showLabels: this.showLabels\n    //       });\n    \n  }\n  \n  public getPerformanceNow(): number | null {\n    const g = window;\n    if (g != null) {\n      const perf = g.performance;\n      if (perf != null) {\n        try {\n          const perfNow = perf.now();\n          if (typeof perfNow === 'number') {\n            return perfNow;\n          }\n        } catch (e) {\n          // do nothing\n        }\n      }\n    }\n    return null;\n  }\n  \n  ngOnDestroy(): void {\n    console.log('VizceralComponent:ngOnDestroy() - suppressing instance.destroy()');\n    if (this.ro) {\n      this.ro.disconnect();\n    }\n    if (this.instance) {\n      // ANDY//this.objectsJSON = this.instance.toJSON();\n      \n      // ANDY// this.instance.dispose(); // <-- doesn't work\n      \n      delete this.instance;\n      \n      this.instance = null;\n    }\n  }\n  \n  ngDoCheck(): void {\n    if (this.configDiff) {\n      const changes = this.configDiff.diff(this.config || {});\n      \n      if (changes) {\n        this.ngOnDestroy();\n        \n        this.ngOnInit();\n      }\n    }\n  }\n  \n  ngOnChanges(changes: SimpleChanges): void {\n    // console.log('VizceralDirective:ngOnChanges())');\n    if (this.instance && changes.disabled) {\n      if (changes.disabled.currentValue !== changes.disabled.previousValue) {\n        this.ngOnDestroy();\n        \n        this.ngOnInit();\n      } else if (changes.traffic) {\n        // console.log('VizceralDirective:ngOnChanges(traffic)');\n        this.instance.updateData(this.traffic);\n      }\n    }\n    \n  }\n  \n  public vizceral(): VizceralGraph {\n    return this.instance;\n  }\n  \n  public setView(view: string []): void {\n    this.view = view;\n    this.instance.setView(this.view || this.defaultProps.view, this.objectToHighlight);\n  }\n  \n  \n  public setSize(width: number, height: number): void {\n    this.initialWidth = width;\n    this.initialHeight = height;\n    \n    if (this.instance) {\n      this.instance.setSize(width, height);\n    }\n  }\n  \n  // private updateStyles(styles) {\n  //   const styleNames = this.instance.getStyles();\n  //   const customStyles = styleNames.reduce((result, styleName) => {\n  //     result[styleName] = styles[styleName] || result[styleName];\n  //     return result;\n  //   }, {});\n  //\n  //   this.instance.updateStyles(customStyles);\n  // }\n  \n  \n  /* private setTraffic(data: any) {\n   this.initialTraffic = data;\n   if (this.instance) {\n   console.log('Data changed..')\n   this.instance.updateData(this.initialTraffic);\n   }\n   }*/\n}\n","import {\n  AfterViewInit,\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  ViewChild,\n  ViewEncapsulation,\n}                            from '@angular/core';\nimport VizceralGraph         from '@deltix/vizceral';\nimport { VizceralDirective } from './ngx-vizceral.directive';\nimport { VizceralSize }      from './ngx-vizceral.models';\n\n@Component({\n  selector: 'vizceral',\n  exportAs: 'ngxVizceral',\n  templateUrl: './ngx-vizceral.component.html',\n  styleUrls: ['./ngx-vizceral.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class VizceralComponent implements AfterViewInit, OnChanges {\n  // private json: any = null;\n  public initData: any = null;\n  \n  // @Input()\n  // set data(data: string) {\n  //   this.setJSON(data);\n  // }\n  \n  @Input() size: VizceralSize = {width: null, height: null};\n  @Input() view: any = null;\n  @Input() showLabels: any = null;\n  @Input() filters: any = null;\n  @Input() objectToHighlight: any = null;\n  @Input() match: any = null;\n  @Input() modes: any = null;\n  @Input() allowDraggingOfNodes: any = null;\n  @Input() styles: any = null;\n  @Input() targetFramerate: any = null;\n  @Input() initialSize: {\n    width: number,\n    height: number,\n  };\n  @Input() useCurrentInitialSize: boolean;\n  \n  @Output() viewChanged = new EventEmitter<any>();\n  @Output() viewUpdated = new EventEmitter<any>();\n  @Output() objectHighlighted = new EventEmitter<any>();\n  @Output() nodeContextSizeChanged = new EventEmitter<any>();\n  @Output() matchesFound = new EventEmitter<any>();\n  @Output() nodeUpdated = new EventEmitter<any>();\n  @Output() objectHovered = new EventEmitter<any>();\n  \n  @HostBinding('class.vizceral')\n  @ViewChild(VizceralDirective, {static: true}) directiveRef: VizceralDirective;\n  \n  constructor() {\n  }\n  \n  // @Input() traffic: any = null;\n  @Input()\n  set traffic(data: any) {\n    this.setTraffic(data);\n  }\n  \n  ngAfterViewInit(): void {\n    // if (this.json != null) {\n    //   this.setJSON(this.json, true);\n    // }\n  }\n  \n  ngOnChanges(changes: SimpleChanges): void {\n  \n  }\n  \n  vizceral(): VizceralGraph {\n    return this.directiveRef.vizceral();\n  }\n  \n  setView(view: string[]) {\n    this.directiveRef.setView(view);\n  }\n\n  locate(searchText: string) {\n    // console.log('Locating nodes that match: ' + searchText);\n    this.vizceral().findNodes(searchText);\n  }\n  \n  private setTraffic(data: any): void {\n    this.initData = data;\n    // if (data != null) {\n    //   this.initData['QuantServer']._particleSystem = {\n    //       isEnabled: true,\n    //       viscousDragCoefficient: 0.2,\n    //       hooksSprings: {\n    //         restLength: 50,\n    //         springConstant: 0.2,\n    //         dampingConstant: 0.1\n    //       },\n    //       particles: {\n    //         mass: 1\n    //       }\n    //   };\n    // }\n    if (this.directiveRef && this.directiveRef.vizceral()) {\n      // console.log('VizceralComponent:setTraffic');\n      // console.log(data)\n      // console.log(this.directiveRef.vizceral());\n      this.vizceral().updateData(data);\n      \n      // console.log('VizceralGraph:')\n      // console.log(this.vizceral())\n      // console.log('Graph:')\n      \n      // let graph = this.vizceral().getGraph('QuantServer', null) as TrafficGraph;\n      // if (graph) {\n      //   let options = {\n      //     ...graph.getPhysicsOptions (),\n      //     isEnabled: true,\n      //     jaspersReplusionBetweenParticles: true,\n      //     viscousDragCoefficient: 0.2,\n      //     hooksSprings: {\n      //       restLength: 50,\n      //       springConstant: 0.2,\n      //       dampingConstant: 0.1\n      //     },\n      //     particles: {\n      //       mass: 1\n      //     }\n      //   };\n      \n      //   let flag = false;\n      //   let _particleSystem_isEnabled = false;\n      //   if (hasOwnPropF.call(options, 'isEnabled')) {\n      //     let { isEnabled } = options;\n      //     options = { ...options};\n      //     delete options.isEnabled;\n      //     if (typeof isEnabled !== 'boolean') {\n      //       console.warn('Got non-boolean value for PhysicsOptions.isEnabled, coercing to boolean:', isEnabled);\n      //       isEnabled = !!isEnabled;\n      //     }\n      //     flag = _particleSystem_isEnabled !== isEnabled;\n      //     _particleSystem_isEnabled = isEnabled;\n      //   }\n      //   console.log (\"IS ENABLED: \" + flag);\n      \n      //   console.log(graph.getPhysicsOptions ());\n      //   console.log(options);\n      //   graph.setPhysicsOptions(options);\n      //   console.log(graph);\n      // }\n      \n    }\n  }\n  \n  // private setJSON(json: string, force?: boolean): void {\n  //   if (force || json !== this.json) {\n  //     if (this.directiveRef && this.directiveRef.vizceral()) {\n  //       // this.directiveRef.loadFromJSON(json, () => {\n  //       //   //this.dataLoaded.emit(this.directiveRef.vizceral());\n  //       // });\n  //     }\n  \n  //     this.json = json;\n  //   }\n  // }\n}\n","<div class=\"vizceral\">\n  <canvas\n      (matchesFound)=\"matchesFound.emit($event)\"\n      (nodeContextSizeChanged)=\"nodeContextSizeChanged.emit($event)\"\n      (objectHighlighted)=\"objectHighlighted.emit($event)\"\n      (viewChanged)=\"viewChanged.emit($event)\"\n      (viewUpdated)=\"viewUpdated.emit($event)\"\n      [allowDraggingOfNodes]=\"allowDraggingOfNodes\"\n      [initialSize]=\"initialSize\"\n      [useCurrentInitialSize]=\"useCurrentInitialSize\"\n      [filters]=\"filters\"\n      [match]=\"match\"\n      [modes]=\"modes\"\n      [objectToHighlight]=\"objectToHighlight\"\n      [showLabels]=\"showLabels\"\n      [size]=\"size\"\n      [styles]=\"styles\"\n      [traffic]=\"initData\"\n      [view]=\"view\" style=\" width:100%; height:100%\"\n      vizceral>\n  </canvas>\n  \n  <div class=\"vizceral-notice\"></div>\n\n</div>\n","import { CommonModule }                     from '@angular/common';\nimport { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { VizceralComponent }                from './ngx-vizceral.component';\nimport { VizceralDirective }                from './ngx-vizceral.directive';\n\n\n@NgModule({\n  declarations: [\n    VizceralComponent,\n    VizceralDirective,\n  ],\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    CommonModule,\n    VizceralComponent,\n    VizceralDirective,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class VizceralModule {\n}\n","/*\n * Public API Surface of ngx-vizceral\n */\n\nexport * from './lib/ngx-vizceral.service';\nexport * from './lib/ngx-vizceral.component';\nexport * from './lib/ngx-vizceral.directive';\nexport * from './lib/ngx-vizceral.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","EventEmitter","VizceralGraph","ResizeObserver","Directive","Output","Input","Component","ViewEncapsulation","HostBinding","ViewChild","CommonModule","NgModule","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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"}